import{j as y,r as a,v as g,P as S,L as N,H as P,S as A,R as C,a as E,b as M}from"./vendor.c4b99152.js";const T=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&d(r)}).observe(document,{childList:!0,subtree:!0});function l(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(e){if(e.ep)return;e.ep=!0;const o=l(e);fetch(e.href,o)}};T();const n=y.exports.jsx,I=y.exports.jsxs,f="https://test-1302380933.cos.ap-shanghai.myqcloud.com/a9592ca35f42633c90d67bbccfc98440_xxx.m3u8";let x=!1;const v={controls:!0},V=()=>{const s=a.exports.useRef(null),c=a.exports.useRef(null),l=a.exports.useRef(),d=a.exports.useRef(),[e,o]=a.exports.useState(!0);a.exports.useState(!1);let r=null,u=null;a.exports.useEffect(()=>{if(!l.current){const t=s.current;if(!t)return;r=l.current=g(t,v,j)}},[s]),a.exports.useEffect(()=>{if(!d.current){const t=c.current;if(!t)return;u=d.current=g(t,v,O)}},[s]);const h=async()=>{var t=new S;return fetch(f).then(i=>i.text()).then(i=>{t.push(i),t.end();const p=t.manifest;return console.log("parsedManifest",p),p})},b=t=>{console.log("rePlay rePlay"),m(),u.currentTime(t-3),u.play()},w=async()=>{console.log("ended ended ended ended");const t=r.currentTime(),i=r.duration();console.log("whereYouAt",t),console.log("lengthOfVideo",i),await h(),b(t)},j=async()=>{console.log("player is ready"),r.autoplay(!0),r.src({type:"application/x-mpegURL",src:f}),r.on("ended",w),(await h()).segments.length,r.on("timeupdate",i=>{const p=r.currentTime();r.duration()-p<10&&(x||(x=!0,L()))})},L=()=>{console.log("loadSrc"),u.src({type:"application/x-mpegURL",src:f})},O=()=>{u.src({type:"application/x-mpegURL",src:f})},m=()=>{o(t=>!t)};return I("div",{children:[n("button",{className:"exchange",onClick:m,children:"exchange"}),n("div",{className:"wrapper wrapper1",style:{zIndex:e?1:-1},children:n("video",{ref:s,className:"video-js vjs-big-play-centered"})}),n("div",{className:"wrapper wrapper2",style:{zIndex:e?-1:1},children:n("video",{ref:c,className:"video-js vjs-big-play-centered"})})]})},k=()=>n("div",{children:"TComponent"});const U=()=>{const s=R.filter(c=>c.path!=="/");return n("div",{children:n("ul",{children:s.map(({path:c,title:l})=>n("li",{children:n(N,{to:c,children:l})},c))})})},R=[{path:"/",component:U,title:"default"},{path:"/page/b",component:V,title:"bbbb"},{path:"/page/t",component:k,title:"tttt"}],Y=()=>n(P,{children:n(A,{children:R.map(s=>n(C,{exact:!0,path:s.path,component:s.component},s.path))})});function q(){return n(Y,{})}E.render(n(M.StrictMode,{children:n(q,{})}),document.getElementById("root"));
